<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,user-scalable=no">
	<title>Document</title>
<script type="text/javascript">
	document.addEventListener('touchstart',function(ev){
		ev.preventDefault();
	});
</script>
<style>
#box{
	position: absolute;
	left: 50%;
	top: 50%;
	margin: -25px 0 0 -25px;
	width: 50px;
	height: 50px;
	background: red;
	color: #fff;
	font-size: 20px;
}
</style>
</head>
<body>
  <div id="box"></div>
  <script type="text/javascript" src="m.Tween.js"></script>
  <script type="text/javascript">
    

  	(function(){
  		//var box = document.querySelector('#box');
  		//css(box,'translateX',0);
  		var lastX;
  		var lastY;
  		var lastZ;
  		var maxRange = 80;
  		var minRange = 20;
  		var isShake = false;
  		window.addEventListener('devicemotion', function(e){
  			var motion = e.accelerationIncludingGravity;
  			var x = Math.round(motion.x);
  			var y = Math.round(motion.y);
  			var z = Math.round(motion.z);
  			var tX = css(box,'translateX');
  			if(getAdr()){
  				x = -x;
  				y = -y;
  				z = -z;
  			}
  			if(typeof lastX == "undefined"){
  				lastX = x;
  				lastY = y;
  				lastZ = z;
  				return;
  			}
            //css(box,'translateX',tX + x);
            
            var dis = Math.abs(x-lastX) + Math.abs(y-lastY) + Math.abs(z-lastZ);
            if(dis > maxRange){
            	isShake = true;
            }
            if(dis < minRange && isShake){
            	isShake = false;
            	alert('您晃动了手机');
            }
  		})
  	})()
  	function getAdr(){
  		var u=navigator.userAgent;
        return u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;
  	}
  </script>
</body>
</html>